{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"Meteor.startup(function () {\n\n  UploadServer.init({\n    tmpDir: process.env.PWD + '/.upload/images/tmp',\n    uploadDir: process.env.PWD + '/.upload/images',\n    checkCreateDirectories: true, //create the directories for you\n\n    getDirectory: function (fileInfo, formData) {\n      // if (formData && formData.directoryName != null) {\n      //   return formData.directoryName;\n      // }\n      return \"/images\";\n    },\n\n    getFileName: function (fileInfo, formData) {\n      //if (formData && formData.prefix != null) {\n      // return formData.prefix + '_' + fileInfo.name;\n      //}\n      return formData._id + '_' + fileInfo.name;\n    },\n    finished: function (fileInfo, formData) {\n      if (formData && formData._id != null) {\n        formData.splash_image = fileInfo.url;\n        console.log(formData);\n        console.log(fileInfo);\n        formData.splash_image = fileInfo.url;\n        Meteor.call('upsertProfile', formData);\n        //Portfolios.update(formData._id, item );\n        //Portfolios.update({_id : formData._id} , {$set : {splash_image : fileInfo.url}});\n        //Items.update({_id: formData._id}, { $push: { uploads: fileInfo }});\n        //Portfolios.update(formData._id , {$set : { splash_image : fileInfo.url }});\n      }\n    }\n  });\n});","ast":null,"map":{"version":3,"sources":["/server/init.js"],"names":[],"mappings":"AAAA,MAAM,CAAC,OAAO,CAAC,YAAY;;AAEzB,cAAY,CAAC,IAAI,CAAC;AAChB,UAAM,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,qBAAqB;AAC/C,aAAS,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,iBAAiB;AAC9C,0BAAsB,EAAE,IAAI;;AAE/B,gBAAY,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;;;;AAItC,aAAO,SAAS,CAAC;KAClB;;AAED,eAAW,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;;;;AAIxC,aAAO,QAAQ,CAAC,GAAG,GAAE,GAAG,GAAC,QAAQ,CAAC,IAAI,CAAC;KACxC;AACD,YAAQ,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACrC,UAAI,QAAQ,IAAI,QAAQ,CAAC,GAAG,IAAI,IAAI,EAAE;AACpC,gBAAQ,CAAC,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC;AACrC,eAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACtB,eAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACtB,gBAAQ,CAAC,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC;AACrC,cAAM,CAAC,IAAI,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;;;;;OAMxC;KACF;GACF,CAAC,CAAC;CACJ,CAAC,CAAC","file":"/server/init.js.map","sourcesContent":["Meteor.startup(function () {\n \n  UploadServer.init({\n    tmpDir: process.env.PWD + '/.upload/images/tmp',\n    uploadDir: process.env.PWD + '/.upload/images',\n    checkCreateDirectories: true, //create the directories for you\n    \n\tgetDirectory: function(fileInfo, formData) {\n     // if (formData && formData.directoryName != null) {\n     //   return formData.directoryName;\n     // }\n      return \"/images\";\n    },\n    \n    getFileName: function(fileInfo, formData) {\n      //if (formData && formData.prefix != null) {\n       // return formData.prefix + '_' + fileInfo.name;\n      //}\n      return formData._id +'_'+fileInfo.name;\n    },\n    finished: function(fileInfo, formData) {\n      if (formData && formData._id != null) {\n      \t\tformData.splash_image = fileInfo.url;\n      \t\tconsole.log(formData);\n      \t\tconsole.log(fileInfo);\n      \t\tformData.splash_image = fileInfo.url;\n      \t\tMeteor.call('upsertProfile', formData);\n      \t\t//Portfolios.update(formData._id, item );\n      \t\t//Portfolios.update({_id : formData._id} , {$set : {splash_image : fileInfo.url}});\n        \t//Items.update({_id: formData._id}, { $push: { uploads: fileInfo }});\n        \t//Portfolios.update(formData._id , {$set : { splash_image : fileInfo.url }});\n\n      }\n    }\n  });\n});\n\n"]},"hash":"89ff0ebd436da47a581ceb023d1c1fcc3e7bdb88"}
