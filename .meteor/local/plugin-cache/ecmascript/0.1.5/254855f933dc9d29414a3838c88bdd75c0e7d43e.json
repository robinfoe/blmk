{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"Meteor.startup(function () {\n\n  /** User setup **/\n  console.log(Accounts.findUserByUsername('blmkadm'));\n  if (typeof Accounts.findUserByUsername('blmkadm') == 'undefined') {\n    var id = Accounts.createUsers({ username: 'blmkadm', password: 'jarvis', profile: { name: 'Brandon Loh' } });\n    Roles.addUsersToRoles(id, 'admin');\n  } else console.log('user found');\n\n  var guidGenerator = {\n    generate: function (s) {\n      var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n      return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n    },\n    uniqueKey: function () {\n      return guidGenerator.generate() + guidGenerator.generate(true) + guidGenerator.generate(true) + guidGenerator.generate();\n    }\n\n  };\n\n  UploadServer.init({\n    tmpDir: process.env.PWD + '/.upload/images/tmp',\n    uploadDir: process.env.PWD + '/.upload/images',\n    checkCreateDirectories: true, //create the directories for you\n\n    getDirectory: function (fileInfo, formData) {\n      return \"work/images\";\n    },\n\n    getFileName: function (fileInfo, formData) {\n      return guidGenerator.uniqueKey() + fileInfo.name; //formData._id +'_'+fileInfo.name;\n    },\n    finished: function (fileInfo, formData) {\n      if (formData && formData._id != null) {\n        formData.splash_image = Meteor.settings.path.upload + fileInfo.path;\n        //formData.splash_image = 'http://188.166.228.29/upload/' + fileInfo.path;\n        Meteor.call('upsertPortfolio', formData);\n      }\n    }\n  });\n});","ast":null,"map":{"version":3,"sources":["/server/init.js"],"names":[],"mappings":"AAAA,MAAM,CAAC,OAAO,CAAC,YAAY;;;AAGzB,SAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,CAAC;AACpD,MAAG,OAAO,QAAQ,CAAC,kBAAkB,CAAC,SAAS,CAAC,IAAI,WAAW,EAAC;AAC9D,QAAI,EAAE,GAAG,QAAQ,CAAC,WAAW,CAAC,EAAC,QAAQ,EAAC,SAAS,EAAG,QAAQ,EAAC,QAAQ,EAAC,OAAO,EAAC,EAAC,IAAI,EAAC,aAAa,EAAC,EAAC,CAAC,CAAC;AACrG,SAAK,CAAC,eAAe,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;GACpC,MACC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;;AAO7B,MAAI,aAAa,GAAG;AACnB,YAAQ,EAAG,UAAS,CAAC,EAAC;AACrB,UAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAC,WAAW,CAAA,CAAE,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;AACvD,aAAO,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,GAAG,CAAC,CAAE;KAChE;AACD,aAAS,EAAG,YAAU;AACrB,aAAO,aAAa,CAAC,QAAQ,EAAE,GAAG,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,QAAQ,EAAE,CAAC;KACzH;;GAED,CAAA;;AAGA,cAAY,CAAC,IAAI,CAAC;AAChB,UAAM,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,qBAAqB;AAC/C,aAAS,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,iBAAiB;AAC9C,0BAAsB,EAAE,IAAI;;AAE/B,gBAAY,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACtC,aAAO,aAAa,CAAC;KACtB;;AAED,eAAW,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACxC,aAAO,aAAa,CAAC,SAAS,EAAE,GAAG,QAAQ,CAAC,IAAI,CAAC;KAClD;AACD,YAAQ,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACrC,UAAI,QAAQ,IAAI,QAAQ,CAAC,GAAG,IAAI,IAAI,EAAE;AACpC,gBAAQ,CAAC,YAAY,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC;;AAEpE,cAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;OAC1C;KACF;GACF,CAAC,CAAC;CACJ,CAAC,CAAC","file":"/server/init.js.map","sourcesContent":["Meteor.startup(function () {\n\n  /** User setup **/\n  console.log(Accounts.findUserByUsername('blmkadm'));\n  if(typeof Accounts.findUserByUsername('blmkadm') == 'undefined'){\n    var id = Accounts.createUsers({username:'blmkadm' , password:'jarvis',profile:{name:'Brandon Loh'}});\n    Roles.addUsersToRoles(id, 'admin');\n  }else\n    console.log('user found');\n\n \n\n\n\n\n\tvar guidGenerator = {\n\t\tgenerate : function(s){\n\t\t\tvar p = (Math.random().toString(16)+\"000000000\").substr(2,8);\n        \treturn s ? \"-\" + p.substr(0,4) + \"-\" + p.substr(4,4) : p ;\n\t\t},\n\t\tuniqueKey : function(){\n\t\t\treturn guidGenerator.generate() + guidGenerator.generate(true) + guidGenerator.generate(true) + guidGenerator.generate();\n\t\t}\n\n\t}\n\n\n  UploadServer.init({\n    tmpDir: process.env.PWD + '/.upload/images/tmp',\n    uploadDir: process.env.PWD + '/.upload/images',\n    checkCreateDirectories: true, //create the directories for you\n    \n\tgetDirectory: function(fileInfo, formData) {\n      return \"work/images\";\n    },\n    \n    getFileName: function(fileInfo, formData) {\n      return guidGenerator.uniqueKey() + fileInfo.name;//formData._id +'_'+fileInfo.name;\n    },\n    finished: function(fileInfo, formData) {\n      if (formData && formData._id != null) {\n      \t\tformData.splash_image = Meteor.settings.path.upload + fileInfo.path;\n          //formData.splash_image = 'http://188.166.228.29/upload/' + fileInfo.path;\n      \t\tMeteor.call('upsertPortfolio', formData);\n      }\n    }\n  });\n});\n\n"]},"hash":"254855f933dc9d29414a3838c88bdd75c0e7d43e"}
