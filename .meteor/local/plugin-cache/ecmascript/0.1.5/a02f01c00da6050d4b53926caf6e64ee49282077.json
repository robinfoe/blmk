{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"var ListHelper = {\n  shortenSentences: function (text) {\n    return !text ? '' : text.length > 70 ? text.substring(0, 70) + '...' : text;\n  },\n\n  isImageUploaded: function (value) {\n    return !value ? 'N' : 'Y';\n  },\n\n  isPublished: function (value) {\n    return value && value === 'Y' ? true : false;\n  },\n\n  generateAddEdit: function (value) {\n    if (value) {\n      return new Spacebars.SafeString(\"<a class='btn btn-primary' href='/backend/portfolio/maintain/\" + value._id + \"'>Maintain</a>\");\n    } else return new Spacebars.SafeString(\"<a href='/backend/portfolio/maintain/add'><i class='fa fa-plus-square icon text-primary-dker fa-2x'></i></a>\");\n  }\n\n};\n\nTemplate.portfolioList.onCreated(function () {\n  this.subscribe('portfolios');\n});\n\nTemplate.portfolioList.helpers({\n  portfolios: function () {\n    return Portfolios.find();\n  },\n\n  tableSettings: function () {\n    return {\n      rowsPerPage: 10,\n      showNavigation: 'auto',\n      showRowCount: false,\n      showNavigationRowsPerPage: false,\n      showColumnToggles: false,\n      fields: [{ key: 'title', label: 'Title' }, { key: 'client', label: 'Client' }, { key: 'description', label: 'Description', fn: ListHelper.shortenSentences }, { key: 'splash_image', label: 'Image', fn: ListHelper.isImageUploaded }, { key: 'published', label: 'Published', fn: ListHelper.isPublished }, { key: '_id',\n        label: ListHelper.generateAddEdit,\n        fn: ListHelper.generateAddEdit\n      }]\n    };\n  }\n});\n\nTemplate.portfolioList.events({\n  \"click .button-update\": function () {\n    return Portfolios.find();\n  }\n});\n\n/** PORTFOLIO Maintain*****/\n// TODO :: what should i do here ?\nvar PortfolioEntity = {\n  constructEntity: function (item) {\n    if (typeof item != \"undefined\" && item != null) {\n      item._id = item._id._str;\n      return item;\n    }\n    return { _id: '',\n      title: '',\n      client: '',\n      description: '',\n      splash_image: '',\n      published: 'N',\n      createdDate: new Date()\n    };\n  },\n  constructEntityByEvent: function (event) {\n    var item = PortfolioEntity.constructEntity(null);\n    item._id = event.target.id.value;\n    item.title = event.target.title.value;\n    item.client = event.target.client.value;\n    item.description = event.target.description.value;\n    item.splash_image = event.target.splash_image.value;\n    item.published = event.target.published.checked ? \"Y\" : \"N\";\n    return item;\n  }\n};\n\nTemplate.portfolioMaintain.onCreated(function () {\n  var controller = Iron.controller();\n  this.subscribe(\"portfolioById\", controller.params._id);\n  this.subscribe('uploads');\n});\n\nTemplate.portfolioMaintain.events({\n  \"submit .portfolio-maintain\": function (event) {\n    // Prevent default browser form submit\n    event.preventDefault();\n    var item = PortfolioEntity.constructEntityByEvent(event);\n    Meteor.call('upsertProfile', item);\n    Router.go('/backend/portfolio');\n  }\n});\n\nTemplate.portfolioMaintain.helpers({\n  item: function () {\n    return PortfolioEntity.constructEntity(Portfolios.findOne());\n  },\n  publishedChecked: function (text) {\n    return \"Y\" === text ? 'checked' : '';\n  },\n  isEdit: function (item) {\n    return !(!item._id || 0 === item._id.length);\n  }\n});\n\n/** UPLOAD template ****************/\n\nTemplate.customUpload.created = function () {\n  Uploader.init(this);\n};\n\nTemplate.customUpload.rendered = function () {\n  Uploader.render.call(this);\n};\n\nTemplate.customUpload.events({\n  'click .start': function (e) {\n    // console.log(Template.instance());\n    Uploader.startUpload.call(Template.instance(), e);\n  }\n});\n\nTemplate.customUpload.helpers({\n  'infoLabel': function () {\n    var instance = Template.instance();\n\n    // we may have not yet selected a file\n    var info = instance.info.get();\n    if (!info) {\n      return;\n    }\n\n    var progress = instance.globalInfo.get();\n    // we display different result when running or not\n    return progress.running ? info.name + ' - ' + progress.progress + '% - [' + progress.bitrate + ']' : info.name + ' - ' + info.size + 'B';\n  },\n  'progress': function () {\n    return Template.instance().globalInfo.get().progress + '%';\n  }\n});","ast":null,"map":{"version":3,"sources":["/client/templates/backend/portfolio.js"],"names":[],"mappings":"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","file":"/client/templates/backend/portfolio.js.map","sourcesContent":["var ListHelper = {\n  shortenSentences : function(text){\n    return (!text) ? '' : (text.length > 70) ? text.substring(0,70) + '...' : text;  \n  },\n\n  isImageUploaded : function(value){\n    return (!value) ? 'N' : 'Y';\n  },\n\n  isPublished : function(value){\n    return (value && value === 'Y') ? true : false;\n  },\n\n  generateAddEdit : function(value){\n    if(value){\n      return new Spacebars.SafeString(\"<a class='btn btn-primary' href='/backend/portfolio/maintain/\"+value._id+\"'>Maintain</a>\")\n    }else\n      return new Spacebars.SafeString(\"<a href='/backend/portfolio/maintain/add'><i class='fa fa-plus-square icon text-primary-dker fa-2x'></i></a>\");\n  }\n\n}; \n\nTemplate.portfolioList.onCreated(function () {\n\tthis.subscribe('portfolios');\n});\n\nTemplate.portfolioList.helpers({\n\tportfolios: function () {\n      return Portfolios.find();\n  },\n\n  tableSettings : function(){\n    return {\n        rowsPerPage: 10,\n        showNavigation: 'auto',\n        showRowCount:false,\n        showNavigationRowsPerPage:false,\n        showColumnToggles: false,\n        fields: [\n          { key: 'title',label: 'Title'},\n          { key: 'client', label: 'Client'},\n          { key: 'description', label: 'Description', fn: ListHelper.shortenSentences  },\n          { key: 'splash_image', label: 'Image', fn: ListHelper.isImageUploaded },\n          { key: 'published', label: 'Published', fn: ListHelper.isPublished },\n          { key : '_id', \n            label : ListHelper.generateAddEdit , \n            fn: ListHelper.generateAddEdit \n          }\n        ]\n      };\n  }\n});\n\n\nTemplate.portfolioList.events({\n    \"click .button-update\": function () {\n      return Portfolios.find();\n    }\n});\n\n\n/** PORTFOLIO Maintain*****/\n// TODO :: what should i do here ?\nvar PortfolioEntity = {\n\tconstructEntity : function(item){\n\t\tif(typeof item != \"undefined\" && item != null){\n\t\t\titem._id = item._id._str;\n\t\t\treturn item;\n\t\t}\n\t\treturn { _id : '',\n    \t\t\ttitle: '',\n    \t\t\tclient : '',\n    \t\t\tdescription : '',\n    \t\t\tsplash_image : '',\n    \t\t\tpublished : 'N',\n    \t\t\tcreatedDate : new Date()\n    \t\t};\n\t},\n\tconstructEntityByEvent : function(event){\n\t\tvar item = PortfolioEntity.constructEntity(null);\n\t\titem._id=event.target.id.value;\n    item.title=event.target.title.value;\n    item.client=event.target.client.value;\n    item.description=event.target.description.value;\n    item.splash_image=event.target.splash_image.value;\n    item.published= (event.target.published.checked)  ? \"Y\" : \"N\";\n    return item;\n\t}\n};\n\n\nTemplate.portfolioMaintain.onCreated(function () {\n\tvar controller = Iron.controller();\n\tthis.subscribe(\"portfolioById\",controller.params._id);\n\tthis.subscribe('uploads');\n});\n\nTemplate.portfolioMaintain.events({\n\t\"submit .portfolio-maintain\": function (event) {\n    \t// Prevent default browser form submit\n    event.preventDefault();\n    var item = PortfolioEntity.constructEntityByEvent(event);\n\t\tMeteor.call('upsertProfile',item);\n\t\tRouter.go('/backend/portfolio');\n    }\n});\n\nTemplate.portfolioMaintain.helpers({\n    item : function () {\n    \treturn  PortfolioEntity.constructEntity(Portfolios.findOne())  ;\n    },\n    publishedChecked : function(text){\n        return (\"Y\" === text) ? 'checked' : '';\n\n    },\n    isEdit : function(item){\n      return !(!item._id || 0 === item._id.length);\n    }   \n});\n\n\n\n/** UPLOAD template ****************/\n\nTemplate.customUpload.created = function() {\n  Uploader.init(this);\n}\n\nTemplate.customUpload.rendered = function () {\n  Uploader.render.call(this);\n};\n\nTemplate.customUpload.events({\n  'click .start': function (e) {\n   // console.log(Template.instance());\n    Uploader.startUpload.call(Template.instance(), e);\n  }\n});\n\nTemplate.customUpload.helpers({\n  'infoLabel': function() {\n    var instance = Template.instance();\n\n    // we may have not yet selected a file\n    var info = instance.info.get()\n    if (!info) {\n      return;\n    }\n\n    var progress = instance.globalInfo.get();\n    // we display different result when running or not\n    return progress.running ?\n      info.name + ' - ' + progress.progress + '% - [' + progress.bitrate + ']' :\n      info.name + ' - ' + info.size + 'B';\n  },\n  'progress': function() {\n    return Template.instance().globalInfo.get().progress + '%';\n  }\n})"]},"hash":"a02f01c00da6050d4b53926caf6e64ee49282077"}
