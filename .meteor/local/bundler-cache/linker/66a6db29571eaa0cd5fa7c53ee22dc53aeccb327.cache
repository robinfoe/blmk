[{"type":"js","data":"/* Imports for global scope */\n\nMongoInternals = Package.mongo.MongoInternals;\nMongo = Package.mongo.Mongo;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nDate = Package['es5-shim'].Date;\nparseInt = Package['es5-shim'].parseInt;\nECMAScript = Package.ecmascript.ECMAScript;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\nUploadServer = Package['tomi:upload-server'].UploadServer;\nReactiveTable = Package['aslagle:reactive-table'].ReactiveTable;\nPreloader = Package['miro:preloader'].Preloader;\nPreloadController = Package['miro:preloader'].PreloadController;\nReactiveDict = Package['reactive-dict'].ReactiveDict;\nRoles = Package['alanning:roles'].Roles;\nMeteor = Package.meteor.Meteor;\nWebApp = Package.webapp.WebApp;\nmain = Package.webapp.main;\nWebAppInternals = Package.webapp.WebAppInternals;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nDDPServer = Package['ddp-server'].DDPServer;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nbabelHelpers = Package['babel-runtime'].babelHelpers;\nPromise = Package.promise.Promise;\nMap = Package['ecmascript-collections'].Map;\nSet = Package['ecmascript-collections'].Set;\nIron = Package['iron:core'].Iron;\nAccounts = Package['accounts-base'].Accounts;\nAccountsServer = Package['accounts-base'].AccountsServer;\nAutoupdate = Package.autoupdate.Autoupdate;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// lib/collections.js                                                  //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nPortfolios = new Mongo.Collection(\"portfolio\", { idGeneration: 'MONGO' });\n                                                                       //\nPortfolios.allow({                                                     // 3\n\tinsert: function (userId, doc) {                                      // 4\n\t\treturn Meteor.user() ? true : false;                                 // 4\n\t},                                                                    //\n\tupdate: function (userId, doc, fields, modifier) {                    // 5\n\t\treturn Meteor.user() ? true : false;                                 // 5\n\t},                                                                    //\n\tremove: function (userId, document) {                                 // 6\n\t\treturn Meteor.user() ? true : false;                                 // 6\n\t}                                                                     //\n});                                                                    //\n                                                                       //\n/** UPLOADS ****************/                                          //\nUploads = new Mongo.Collection('uploads');                             // 11\nUploads.allow({                                                        // 12\n\tinsert: function (userId, doc) {                                      // 13\n\t\treturn true;                                                         // 13\n\t},                                                                    //\n\tupdate: function (userId, doc, fields, modifier) {                    // 14\n\t\treturn true;                                                         // 14\n\t}                                                                     //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/lib/collections.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/lib/collections.js"],"names":[],"mappings":";;;;;;;;AAAA,UAAU,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,WAAW,EAAC,EAAC,YAAY,EAAC,OAAO,EAAC,CAAC,CAAC;;AAEtE,UAAU,CAAC,KAAK,CAAC;AAChB,OAAM,EAAE,UAAU,MAAM,EAAE,GAAG,EAAE;AAAC,SAAQ,MAAM,CAAC,IAAI,EAAE,GAAI,IAAI,GAAG,KAAK,CAAC;EAAC;AACvE,OAAM,EAAE,UAAU,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE;AAAC,SAAQ,MAAM,CAAC,IAAI,EAAE,GAAI,IAAI,GAAG,KAAK,CAAC;EAAC;AACzF,OAAM,EAAG,UAAS,MAAM,EAAE,QAAQ,EAAC;AAAC,SAAQ,MAAM,CAAC,IAAI,EAAE,GAAI,IAAI,GAAG,KAAK,CAAC;EAAC;CAC3E,CAAC,CAAC;;;AAIH,OAAO,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;AAC1C,OAAO,CAAC,KAAK,CAAC;AACb,OAAM,EAAE,UAAU,MAAM,EAAE,GAAG,EAAE;AAAC,SAAO,IAAI,CAAC;EAAC;AAC7C,OAAM,EAAE,UAAU,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE;AAAC,SAAO,IAAI,CAAC;EAAC;CAC/D,CAAC,CAAC,sE","file":"/lib/collections.js","sourcesContent":["Portfolios = new Mongo.Collection(\"portfolio\",{idGeneration:'MONGO'});\n\nPortfolios.allow({\n\tinsert: function (userId, doc) {return (Meteor.user()) ? true : false;},\n\tupdate: function (userId, doc, fields, modifier) {return (Meteor.user()) ? true : false;},\n\tremove : function(userId, document){return (Meteor.user()) ? true : false;}\n});\n\n\n/** UPLOADS ****************/\nUploads = new Mongo.Collection('uploads');\nUploads.allow({\n\tinsert: function (userId, doc) {return true;},\n\tupdate: function (userId, doc, fields, modifier) {return true;}\n});\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// lib/global.js                                                       //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nCREDENTIAL = {                                                         // 1\n                                                                       //\n\tisLoggedIn: function () {                                             // 3\n\t\treturn Meteor.user() ? true : false;                                 // 4\n\t},                                                                    //\n                                                                       //\n\tcurrentUser: function () {                                            // 7\n\t\treturn Meteor.user();                                                // 8\n\t},                                                                    //\n                                                                       //\n\tisAdminUser: function () {                                            // 11\n\t\treturn CREDENTIAL.isLoggedIn() ? Roles.userIsInRole(Meteor.user(), 'admin') : false;\n\t}                                                                     //\n};                                                                     //\n                                                                       //\nWEBUTIL = {                                                            // 16\n\tisStringEmpty: function (text) {                                      // 17\n\t\treturn !text || 0 === text.length;                                   // 18\n\t}                                                                     //\n};                                                                     //\n                                                                       //\nAccounts.config({                                                      // 23\n\tloginExpirationInDays: 30                                             // 24\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/lib/global.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/lib/global.js"],"names":[],"mappings":";;;;;;;;AAAA,UAAU,GAAG;;AAEZ,WAAU,EAAG,YAAU;AACtB,SAAQ,MAAM,CAAC,IAAI,EAAE,GAAI,IAAI,GAAG,KAAK,CAAC;EACtC;;AAED,YAAW,EAAG,YAAU;AACvB,SAAO,MAAM,CAAC,IAAI,EAAE,CAAC;EACrB;;AAED,YAAW,EAAG,YAAU;AACvB,SAAQ,UAAU,CAAC,UAAU,EAAE,GAAI,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,GAAG,KAAK,CAAC;EACtF;CACD;;AAED,OAAO,GAAG;AACT,cAAa,EAAG,UAAS,IAAI,EAAC;AAC7B,SAAQ,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,MAAM,CAAE;EACpC;CACD;;AAGD,QAAQ,CAAC,MAAM,CAAC;AACb,sBAAqB,EAAE,EAAE;CAC3B,CAAC,uE","file":"/lib/global.js","sourcesContent":["CREDENTIAL = {\n\n\tisLoggedIn : function(){\n\t\treturn (Meteor.user()) ? true : false;\n\t},\n\n\tcurrentUser : function(){\n\t\treturn Meteor.user();\n\t},\n\n\tisAdminUser : function(){\n\t\treturn (CREDENTIAL.isLoggedIn()) ? Roles.userIsInRole(Meteor.user(), 'admin') : false;\n\t}\n}\n\nWEBUTIL = {\n\tisStringEmpty : function(text){\n\t\treturn (!text || 0 === text.length);\n\t}\n}\n\n\nAccounts.config({\n   loginExpirationInDays: 30\n}) "]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// lib/router.js                                                       //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nRouter.configure({                                                     // 1\n\t// the default layout                                                 //\n\tlayoutTemplate: 'mainLayout'                                          // 3\n});                                                                    //\n                                                                       //\nRouter.onBeforeAction(function () {                                    // 7\n\tvar backendPrefix = \"/backend\";                                       // 8\n\tvar backendLogin = backendPrefix + '/login';                          // 9\n\tvar isBackend = this.url.substring(0, backendPrefix.length) === backendPrefix;\n\tvar isBackendLogin = this.url.substring(0, backendLogin.length) === backendLogin;\n                                                                       //\n\tif (backendLogin && !isBackendLogin && !CREDENTIAL.isAdminUser()) this.router.go(backendLogin);\n                                                                       //\n\tthis.layout(isBackend ? 'adminLayout' : 'mainLayout');                // 16\n                                                                       //\n\t/*                                                                    //\n if(!isBackend)                                                        //\n \tthis.layout('mainLayout');                                           //\n else{                                                                 //\n \tif( !isBackendLogin && !CREDENTIAL.isAdminUser())                    //\n \t\trouter.go(backendLogin);                                            //\n \telse                                                                 //\n \t\tthis.layout('adminLayout');                                         //\n }                                                                     //\n                                                                       //\n if(this.url.substring(0, backendPrefix.length) === backendPrefix){    //\n \tthis.layout('adminLayout');                                          //\n }else{                                                                //\n \tthis.layout('mainLayout');                                           //\n }                                                                     //\n */                                                                    //\n                                                                       //\n\tthis.next();                                                          // 37\n});                                                                    //\n                                                                       //\nRouter.route('/', {                                                    // 40\n\twaitOn: function () {                                                 // 41\n\t\treturn [Meteor.subscribe('publicPortfolios', 'Y'), Meteor.subscribe('uploads')];\n\t},                                                                    //\n\taction: function () {                                                 // 44\n\t\tif (this.ready()) {                                                  // 45\n\t\t\tthis.render('home');                                                // 46\n\t\t} else {                                                             //\n\t\t\t//this.next();                                                      //\n\t\t\t//render splash screen... .                                         //\n\t\t}                                                                    //\n\t}                                                                     //\n                                                                       //\n});                                                                    //\n                                                                       //\n/*** BACK END Router *****************/                                //\n/*                                                                     //\npreload : {                                                            //\n\t'verbose': true,                                                      //\n\t'timeOut': 5000,                                                      //\n\t'sync'   : 'scripts/froogaloop/script.js',                            //\n}                                                                      //\n*/                                                                     //\nRouter.route('/backend/login', {                                       // 65\n\taction: function () {                                                 // 66\n\t\tif (this.ready()) {                                                  // 67\n\t\t\tthis.render('backendLogin');                                        // 68\n\t\t} else {                                                             //\n\t\t\t//this.next();                                                      //\n\t\t\t//render splash screen... .                                         //\n\t\t}                                                                    //\n\t}                                                                     //\n});                                                                    //\n                                                                       //\nRouter.route('/backend/logout', function () {                          // 77\n\tMeteor.logout(function (message) {                                    // 78\n\t\tRouter.go('/backend/login');                                         // 79\n\t});                                                                   //\n});                                                                    //\n                                                                       //\nRouter.route('/backend/portfolio', {                                   // 84\n\taction: function () {                                                 // 85\n\t\tif (this.ready()) {                                                  // 86\n\t\t\tthis.render('portfolioList');                                       // 87\n\t\t} else {                                                             //\n\t\t\t//this.next();                                                      //\n\t\t\t//render splash screen... .                                         //\n\t\t}                                                                    //\n\t}                                                                     //\n});                                                                    //\n                                                                       //\nRouter.route('/backend/portfolio/maintain/:_id', {                     // 96\n\taction: function () {                                                 // 97\n\t\tif (this.ready()) {                                                  // 98\n\t\t\tthis.render('portfolioMaintain');                                   // 99\n\t\t} else {                                                             //\n\t\t\t//this.next();                                                      //\n\t\t\t//render splash screen... .                                         //\n\t\t}                                                                    //\n\t}                                                                     //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/lib/router.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/lib/router.js"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,CAAC,SAAS,CAAC;;AAEf,eAAc,EAAE,YAAY;CAC7B,CAAC,CAAC;;AAGH,MAAM,CAAC,cAAc,CAAC,YAAU;AAC/B,KAAI,aAAa,GAAG,UAAU,CAAC;AAC/B,KAAI,YAAY,GAAG,aAAa,GAAC,QAAQ;AACzC,KAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,MAAM,CAAC,KAAK,aAAa,CAAC;AAC9E,KAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,KAAK,YAAY,CAAC;;AAEjF,KAAG,YAAY,IAAI,CAAC,cAAc,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,EAC9D,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;;AAE9B,KAAI,CAAC,MAAM,CAAE,SAAS,GAAI,aAAa,GAAE,YAAY,CAAC,CAAC;;;;;;;;;;;;;;;;;;;AAqBvD,KAAI,CAAC,IAAI,EAAE,CAAC;CACZ,CAAC,CAAC;;AAEH,MAAM,CAAC,KAAK,CAAC,GAAG,EAAG;AAClB,OAAM,EAAE,YAAY;AAChB,SAAO,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,EAAC,GAAG,CAAC,EAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC;EACjF;AACD,OAAM,EAAE,YAAU;AACjB,MAAI,IAAI,CAAC,KAAK,EAAE,EAAC;AAChB,OAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;GACpB,MAAI;;;GAGJ;EACD;;CASD,CAAC,CAAC;;;;;;;;;;AAKH,MAAM,CAAC,KAAK,CAAC,gBAAgB,EAAE;AAC9B,OAAM,EAAE,YAAU;AACjB,MAAI,IAAI,CAAC,KAAK,EAAE,EAAC;AAChB,OAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;GAC5B,MAAI;;;GAGJ;EACD;CACD,CAAC,CAAC;;AAGH,MAAM,CAAC,KAAK,CAAC,iBAAiB,EAAE,YAAU;AACzC,OAAM,CAAC,MAAM,CAAC,UAAS,OAAO,EAAC;AAC9B,QAAM,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;EAC5B,CAAC,CAAC;CACH,CAAC,CAAC;;AAGH,MAAM,CAAC,KAAK,CAAC,oBAAoB,EAAE;AAClC,OAAM,EAAE,YAAU;AACjB,MAAI,IAAI,CAAC,KAAK,EAAE,EAAC;AAChB,OAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;GAC7B,MAAI;;;GAGJ;EACD;CACD,CAAC,CAAC;;AAGH,MAAM,CAAC,KAAK,CAAC,kCAAkC,EAAE;AAChD,OAAM,EAAE,YAAU;AACjB,MAAI,IAAI,CAAC,KAAK,EAAE,EAAC;AAChB,OAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;GACjC,MAAI;;;GAGJ;EACD;CACD,CAAC,CAAC,sE","file":"/lib/router.js","sourcesContent":["Router.configure({\n  // the default layout\n  layoutTemplate: 'mainLayout'\n});  \n\n\nRouter.onBeforeAction(function(){\n\tvar backendPrefix = \"/backend\";\n\tvar backendLogin = backendPrefix+'/login'\n\tvar isBackend = this.url.substring(0, backendPrefix.length) === backendPrefix;\n\tvar isBackendLogin = this.url.substring(0, backendLogin.length) === backendLogin;\n\n\tif(backendLogin && !isBackendLogin && !CREDENTIAL.isAdminUser())\n\t\tthis.router.go(backendLogin);\n\n\tthis.layout((isBackend) ? 'adminLayout': 'mainLayout');\n\t\n\n\t/*\n\tif(!isBackend)\n\t\tthis.layout('mainLayout');\n\telse{\n\t\tif( !isBackendLogin && !CREDENTIAL.isAdminUser())\n\t\t\trouter.go(backendLogin);\n\t\telse\n\t\t\tthis.layout('adminLayout');\n\t}\n\n\n\tif(this.url.substring(0, backendPrefix.length) === backendPrefix){\n\t\tthis.layout('adminLayout');\n\t}else{\n\t\tthis.layout('mainLayout');\n\t}\n\t*/\n\n\tthis.next();\n});\n\nRouter.route('/' , {\n\twaitOn: function () {\n    \treturn [Meteor.subscribe('publicPortfolios','Y'),Meteor.subscribe('uploads')];\n\t},\n\taction: function(){\n\t\tif (this.ready()){\n\t\t\tthis.render('home');\n\t\t}else{\n\t\t//this.next();\n\t\t//render splash screen... .\n\t\t}\n\t},\n\n\t/*\n\tpreload : {\n\t\t'verbose': true,\n\t\t'timeOut': 5000, \n\t\t'sync'   : 'scripts/froogaloop/script.js',\n\t}\n\t*/\n});\n\n\n\n/*** BACK END Router *****************/\nRouter.route('/backend/login' ,{\n\taction: function(){\n\t\tif (this.ready()){\n\t\t\tthis.render('backendLogin');\n\t\t}else{\n\t\t\t//this.next();\n\t\t\t//render splash screen... .\n\t\t}\n\t}\n});\n\n\nRouter.route('/backend/logout' ,function(){\n\tMeteor.logout(function(message){\n\t\tRouter.go('/backend/login');\n\t});\n});\n\n\nRouter.route('/backend/portfolio' ,{\n\taction: function(){\n\t\tif (this.ready()){\n\t\t\tthis.render('portfolioList');\n\t\t}else{\n\t\t\t//this.next();\n\t\t\t//render splash screen... .\n\t\t}\n\t}\n});\n\n\nRouter.route('/backend/portfolio/maintain/:_id' ,{\n\taction: function(){\n\t\tif (this.ready()){\n\t\t\tthis.render('portfolioMaintain');\n\t\t}else{\n\t\t\t//this.next();\n\t\t\t//render splash screen... .\n\t\t}\n\t}\n});\n\n\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// server/init.js                                                      //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nMeteor.startup(function () {                                           // 1\n                                                                       //\n  /** User setup **/                                                   //\n  if (typeof Accounts.findUserByUsername('blmkadm') == 'undefined') {  // 4\n    var id = Accounts.createUser({ username: 'blmkadm', password: 'jarvis', profile: { name: 'Brandon Loh' } });\n    Roles.addUsersToRoles(id, 'admin');                                // 6\n  }                                                                    //\n                                                                       //\n  var guidGenerator = {                                                // 13\n    generate: function (s) {                                           // 14\n      var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n      return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;      // 16\n    },                                                                 //\n    uniqueKey: function () {                                           // 18\n      return guidGenerator.generate() + guidGenerator.generate(true) + guidGenerator.generate(true) + guidGenerator.generate();\n    }                                                                  //\n                                                                       //\n  };                                                                   //\n                                                                       //\n  UploadServer.init({                                                  // 25\n    tmpDir: process.env.PWD + '/.upload/images/tmp',                   // 26\n    uploadDir: process.env.PWD + '/.upload/images',                    // 27\n    checkCreateDirectories: true, //create the directories for you     // 28\n                                                                       //\n    getDirectory: function (fileInfo, formData) {                      // 30\n      return \"work/images\";                                            // 31\n    },                                                                 //\n                                                                       //\n    getFileName: function (fileInfo, formData) {                       // 34\n      return guidGenerator.uniqueKey() + fileInfo.name; //formData._id +'_'+fileInfo.name;\n    },                                                                 //\n    finished: function (fileInfo, formData) {                          // 37\n      if (formData && formData._id != null) {                          // 38\n        formData.splash_image = Meteor.settings.path.upload + fileInfo.path;\n        //formData.splash_image = 'http://188.166.228.29/upload/' + fileInfo.path;\n        Meteor.call('upsertPortfolio', formData);                      // 41\n      }                                                                //\n    }                                                                  //\n  });                                                                  //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/server/init.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/server/init.js"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,CAAC,OAAO,CAAC,YAAY;;;AAGzB,MAAG,OAAO,QAAQ,CAAC,kBAAkB,CAAC,SAAS,CAAC,IAAI,WAAW,EAAC;AAC9D,QAAI,EAAE,GAAG,QAAQ,CAAC,UAAU,CAAC,EAAC,QAAQ,EAAC,SAAS,EAAG,QAAQ,EAAC,QAAQ,EAAC,OAAO,EAAC,EAAC,IAAI,EAAC,aAAa,EAAC,EAAC,CAAC,CAAC;AACpG,SAAK,CAAC,eAAe,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;GACpC;;AAMF,MAAI,aAAa,GAAG;AACnB,YAAQ,EAAG,UAAS,CAAC,EAAC;AACrB,UAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAC,WAAW,EAAE,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;AACvD,aAAO,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,GAAG,CAAC,CAAE;KAChE;AACD,aAAS,EAAG,YAAU;AACrB,aAAO,aAAa,CAAC,QAAQ,EAAE,GAAG,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,QAAQ,EAAE,CAAC;KACzH;;GAED;;AAGA,cAAY,CAAC,IAAI,CAAC;AAChB,UAAM,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,qBAAqB;AAC/C,aAAS,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,iBAAiB;AAC9C,0BAAsB,EAAE,IAAI;;AAE/B,gBAAY,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACtC,aAAO,aAAa,CAAC;KACtB;;AAED,eAAW,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACxC,aAAO,aAAa,CAAC,SAAS,EAAE,GAAG,QAAQ,CAAC,IAAI,CAAC;KAClD;AACD,YAAQ,EAAE,UAAS,QAAQ,EAAE,QAAQ,EAAE;AACrC,UAAI,QAAQ,IAAI,QAAQ,CAAC,GAAG,IAAI,IAAI,EAAE;AACpC,gBAAQ,CAAC,YAAY,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC;;AAEpE,cAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;OAC1C;KACF;GACF,CAAC,CAAC;CACJ,CAAC,CAAC,sE","file":"/server/init.js","sourcesContent":["Meteor.startup(function () {\n\n  /** User setup **/\n  if(typeof Accounts.findUserByUsername('blmkadm') == 'undefined'){\n    var id = Accounts.createUser({username:'blmkadm' , password:'jarvis',profile:{name:'Brandon Loh'}});\n    Roles.addUsersToRoles(id, 'admin');\n  }\n \n\n\n\n\n\tvar guidGenerator = {\n\t\tgenerate : function(s){\n\t\t\tvar p = (Math.random().toString(16)+\"000000000\").substr(2,8);\n        \treturn s ? \"-\" + p.substr(0,4) + \"-\" + p.substr(4,4) : p ;\n\t\t},\n\t\tuniqueKey : function(){\n\t\t\treturn guidGenerator.generate() + guidGenerator.generate(true) + guidGenerator.generate(true) + guidGenerator.generate();\n\t\t}\n\n\t}\n\n\n  UploadServer.init({\n    tmpDir: process.env.PWD + '/.upload/images/tmp',\n    uploadDir: process.env.PWD + '/.upload/images',\n    checkCreateDirectories: true, //create the directories for you\n    \n\tgetDirectory: function(fileInfo, formData) {\n      return \"work/images\";\n    },\n    \n    getFileName: function(fileInfo, formData) {\n      return guidGenerator.uniqueKey() + fileInfo.name;//formData._id +'_'+fileInfo.name;\n    },\n    finished: function(fileInfo, formData) {\n      if (formData && formData._id != null) {\n      \t\tformData.splash_image = Meteor.settings.path.upload + fileInfo.path;\n          //formData.splash_image = 'http://188.166.228.29/upload/' + fileInfo.path;\n      \t\tMeteor.call('upsertPortfolio', formData);\n      }\n    }\n  });\n});\n\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// server/publish.js                                                   //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nMeteor.publish('publicPortfolios', function (pub) {                    // 1\n\treturn Portfolios.find({ published: pub });                           // 2\n});                                                                    //\n                                                                       //\nMeteor.publish('portfolios', function () {                             // 6\n\treturn Portfolios.find({});                                           // 7\n});                                                                    //\n                                                                       //\nMeteor.publish('portfolioById', function (id) {                        // 10\n\treturn Portfolios.find({ _id: new Mongo.ObjectID(id) });              // 11\n});                                                                    //\n                                                                       //\nMeteor.publish('uploads', function () {                                // 14\n\treturn Uploads.find();                                                // 15\n});                                                                    //\n                                                                       //\nMeteor.methods({                                                       // 20\n\t'upsertPortfolio': function (item) {                                  // 21\n\t\tdelete item.isEdit;                                                  // 22\n\t\titem.updatedDate = new Date();                                       // 23\n\t\tif (!item._id || 0 === item._id.length) {                            // 24\n\t\t\tdelete item._id;                                                    // 25\n\t\t\titem.createdDate = new Date();                                      // 26\n                                                                       //\n\t\t\tPortfolios.insert(item);                                            // 28\n\t\t} else {                                                             //\n\t\t\titem._id = new Mongo.ObjectID(item._id);                            // 30\n\t\t\tPortfolios.update(item._id, { $set: {                               // 31\n\t\t\t\t\ttitle: item.title,                                                // 32\n\t\t\t\t\tclient: item.client,                                              // 33\n\t\t\t\t\tdescription: item.description,                                    // 34\n\t\t\t\t\tsplash_image: item.splash_image,                                  // 35\n\t\t\t\t\tvideo_url: item.video_url,                                        // 36\n\t\t\t\t\tpublished: item.published,                                        // 37\n\t\t\t\t\tupdatedDate: item.updatedDate                                     // 38\n\t\t\t\t} });                                                              //\n\t\t}                                                                    //\n\t},                                                                    //\n                                                                       //\n\t'removePortfolio': function (id) {                                    // 44\n\t\tid = new Mongo.ObjectID(id);                                         // 45\n\t\tPortfolios.remove(id);                                               // 46\n\t}                                                                     //\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/server/publish.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/server/publish.js"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,CAAC,OAAO,CAAC,kBAAkB,EAAE,UAAS,GAAG,EAAE;AAChD,QAAO,UAAU,CAAC,IAAI,CAAC,EAAC,SAAS,EAAG,GAAG,EAAC,CAAC,CAAC;CAC1C,CAAC,CAAC;;AAGH,MAAM,CAAC,OAAO,CAAC,YAAY,EAAE,YAAW;AACvC,QAAO,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;CAC3B,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,UAAS,EAAE,EAAE;AAC5C,QAAO,UAAU,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,IAAI,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAC,CAAC,CAAC;CACtD,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,YAAW;AACnC,QAAO,OAAO,CAAC,IAAI,EAAE,CAAC;CACvB,CAAC,CAAC;;AAIH,MAAM,CAAC,OAAO,CAAC;AACd,kBAAiB,EAAG,UAAS,IAAI,EAAC;AACjC,SAAO,IAAI,CAAC,MAAM,CAAC;AACnB,MAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAC9B,MAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,MAAM,EAAC;AACrC,UAAO,IAAI,CAAC,GAAG,CAAC;AAChB,OAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;;AAE9B,aAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;GACxB,MAAI;AACJ,OAAI,CAAC,GAAG,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACxC,aAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,IAAI,EAAG;AACnC,UAAK,EAAG,IAAI,CAAC,KAAK;AAClB,WAAM,EAAG,IAAI,CAAC,MAAM;AACpB,gBAAW,EAAG,IAAI,CAAC,WAAW;AAC9B,iBAAY,EAAG,IAAI,CAAC,YAAY;AAChC,cAAS,EAAG,IAAI,CAAC,SAAS;AAC1B,cAAS,EAAG,IAAI,CAAC,SAAS;AAC1B,gBAAW,EAAG,IAAI,CAAC,WAAW;KAC9B,EAAC,CAAC,CAAC;GAEJ;EACD;;AAED,kBAAiB,EAAG,UAAS,EAAE,EAAC;AAC/B,IAAE,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAC5B,YAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;EACtB;CACD,CAAC,CAAC,sE","file":"/server/publish.js","sourcesContent":["Meteor.publish('publicPortfolios', function(pub) {\n\treturn Portfolios.find({published : pub});\n});\n\n\nMeteor.publish('portfolios', function() {\n\treturn Portfolios.find({});\n});\n\nMeteor.publish('portfolioById', function(id) {\n\treturn Portfolios.find({_id: new Mongo.ObjectID(id)});\n});\n\nMeteor.publish('uploads', function() {\n  return Uploads.find();\n});\n\n\n\nMeteor.methods({\n\t'upsertPortfolio' : function(item){\n\t\tdelete item.isEdit;\n\t\titem.updatedDate = new Date();\n\t\tif(!item._id || 0 === item._id.length){\n\t\t\tdelete item._id;\n\t\t\titem.createdDate = new Date();\n\t\t\t\n\t\t\tPortfolios.insert(item);\n\t\t}else{\n\t\t\titem._id = new Mongo.ObjectID(item._id);\n\t\t\tPortfolios.update(item._id, {$set : { \n\t\t\t\ttitle : item.title,\n\t\t\t\tclient : item.client,\n\t\t\t\tdescription : item.description,\n\t\t\t\tsplash_image : item.splash_image,\n\t\t\t\tvideo_url : item.video_url,\n\t\t\t\tpublished : item.published ,\n\t\t\t\tupdatedDate : item.updatedDate\n\t\t\t}});\n\n\t\t}\n\t},\n\t\n\t'removePortfolio' : function(id){\n\t\tid = new Mongo.ObjectID(id);\n\t\tPortfolios.remove(id);\n\t}\n});"]}}]